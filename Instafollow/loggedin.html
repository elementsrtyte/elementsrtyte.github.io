<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>Instafollow</title>
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>



<script type="text/javascript">
	$(document).ready(function($) {
		
				//Both Ajax Calls
		$( document ).ajaxSuccess(function( event, request, settings ) {
			  console.log("Both ajax calls completed." );
			  if(FolloweesSuccess & FolloweesSuccess)
			  {
			  	console.log("Both Ajax Calls completed successfully!");
			  	console.log(followersArray);
			  	console.log(followedByArray);
			  }
		});
	});

	var FollowersSucess = false;
	var FolloweesSuccess = false;

	var followersArray;
	var followedByArray;



	var d;
	function Followers(){
		var ACCESS_TOKEN = getFirstAnchorTagValue(); 
		console.log("Access Token: " + ACCESS_TOKEN);


		$.ajax({
			url: 'https://api.instagram.com/v1/users/self/follows?access_token=' + ACCESS_TOKEN,
			type: 'GET',
			dataType: 'jsonp'
		})
		.done(function(data) {
			console.log("success");
			success = true; //inc
			console.log(data);
			$.each(data, function(k, v){
				console.log(v.id);
			});
			followersArray = data;
		})
		.fail(function() {
			console.log("error");
		});

		$.ajax({				 
			url: 'https://api.instagram.com/v1/users/self/followed-by?access_token=' + ACCESS_TOKEN,
			type: 'GET',
			dataType: 'jsonp'
		})
		.done(function(data) {
			console.log("success");
			success = true;
			console.log(data);
			$.each(data, function(k, v){
				console.log(v.id);
			});
			followedByArray = data;
		})
		.fail(function() {
			console.log("error");
		});
		
	}

	function getFirstAnchorTagValue() {
		return window.location.hash.substring(window.location.hash.indexOf("=")+1);
	}


// function pagination(url){
// 	if(data.pagination.next_url)

// }

</script>

</head>
<body>

<div class="container">

<input type="button" value="Find Unfollowers" onclick="Followers()"/>
	
</div>


	
</body>
</html>





